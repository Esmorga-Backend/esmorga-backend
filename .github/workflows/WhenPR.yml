name: Run  Unit & Component Tests
run-name: ${{ github.actor }} is testing PR ${{ github.ref }} new code ðŸš€
on:
  pull_request:
    types: [opened, reopened, edited, synchronize]
    branches:
      - main
    paths:
      - "**"
  workflow_dispatch:

jobs:
  
  SetupEnv:
    uses: ./.github/workflows/SetupENV.yml
    secrets: inherit

  Run-tests:
    uses: ./.github/workflows/RunTests.yml
    with:
      config: ${{needs.SetupEnv.outputs.VARS}}
    secrets: inherit
    needs: SetupEnv
      
    




    # env:
    #   AIO_TOKEN: ${{ secrets.AIO_TOKEN }}
    #   GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
    #   POSTMAN_TOKEN: ${{ secrets.postmanToken }}
    #   JWT_SECRET: ${{ secrets.JWT_SECRET }}
    #   EMAIL_PASS: ${{ secrets.EMAIL_PASS}}
    #   MONGODB_URI: "mongodb://localhost:27017/esmorga"

    #   # APP_PORT: ${{vars.APP_PORT}}
    #   # NODE_ENV: ${{vars.NODE_ENV}}
    #   # ACCESS_TOKEN_TTL: 600
    #   # MAX_PAIR_OF_TOKEN: 5
    #   # CYPRESS_BASE_URL: http://localhost:3000/
    #   # DNS_NAME: http://localhost:3000
    #   # EMAIL_USER: esmorgamailservice@gmail.com
    #   # APP_LINK: https://www.google.com
